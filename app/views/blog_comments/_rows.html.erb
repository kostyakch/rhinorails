<%= f.hidden_field :blog_id, value: @blog.id %>
<%= f.hidden_field :parent_id %>

<legend>Комментировать <small style="display:none;"><a href="#" class="cancel_reply">отменить "ответить"</a></small></legend>
<%= render 'shared/error_messages', object: f.object %>

<div class="form-horizontal"> 
    <%= fields_for @user do |u| %>
        <%= render 'shared/error_messages', object: u.object %>
        <div class="control-group">
            <%= f.label :name, class: 'control-label' %>
            <div class="controls">
                <%= u.text_field :name, class: 'span3' %>
            </div>
        </div>         
        <div class="control-group">
            <%= f.label :email, class: 'control-label' %>
            <div class="controls">
                <%= u.text_field :email, class: 'span3' %>
                <span class="help"> - не будет отображаться на сайте</span>
            </div>
        </div>         
    <% end %>

	<div class="control-group">
        <%= f.label :comment, class: 'control-label' %>
        <div class="controls">
            <%= f.text_area :comment, class: 'span10', rows: 4 %>
        </div>
    </div>      

    <div class="form-actions">
        <div class="btn-overlay">
            <%= f.button t("_BTN_SAVE"), class: "btn btn-primary" %>
        </div>
    </div>
</div>

<% content_for :javascript do %>
<script type="text/javascript">
    // Добавляет значение parent_id для комментирования комментария
    $('.reply').click(function(){
        $('#blog_comment_parent_id').val( $(this).parent().find('input').val() );
        $('.cancel_reply').parent().show();
        return false;
    });

    // Удаляет значение parent_id для комментирования комментария
    $(".cancel_reply").click(function(){
        $('.cancel_reply').parent().hide();
        $('#blog_comment_parent_id').val('');
        return false;
    });
</script>   
<% end %>